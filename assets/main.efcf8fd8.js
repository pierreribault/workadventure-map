import{b as A}from"./init.e2c43348.js";console.log("Script started successfully");let s;WA.onInit().then(async()=>{console.log("Scripting API ready"),console.log("Player tags: ",WA.player);function c(t,l=new Date){return l.setTime(l.getTime()+t*60*60*1e3),l}const p=c(1);let i=0,y=0;console.log(WA.player),console.log(WA.room),setInterval(function(){let t=new Date().getTime(),l=p.getTime()-t;i=Math.floor(l%(1e3*60*60)/(1e3*60)),y=Math.floor(l%(1e3*60)/1e3)}),WA.room.onEnterLayer("clockZone").subscribe(()=>{s=WA.ui.openPopup("clockPopup","Time left: "+i+" "+y,[])}),WA.room.onEnterLayer("popupZone").subscribe(()=>{s=WA.ui.openPopup("zonePopup","nique ta pute de m\xE8re",[])}),WA.room.onEnterLayer("openWallZone").subscribe(()=>{WA.room.hideLayer("openWall")}),WA.room.onEnterLayer("closeWallZone").subscribe(()=>{WA.room.showLayer("openWall")}),WA.room.onLeaveLayer("popupZone").subscribe(u),WA.room.onLeaveLayer("clockZone").subscribe(u),A().then(async()=>{console.log("Scripting API Extra ready"),WA.room.getTiledMap().then(async t=>{let l=t.width,W=t.height;for(let o=0;o<l;o++)for(let e=0;e<W;e++)WA.room.setTiles([{x:o,y:e,tile:7,layer:"darkness"}]);let n=0,a=0;WA.player.getPosition().then(o=>{n=Math.round(o.x/32),a=Math.round(o.y/32);for(let e=0;e<5;e++)for(let r=0;r<5;r++)WA.room.setTiles([{x:n-2+e,y:a-2+r,tile:null,layer:"darkness"}])}),WA.player.onPlayerMove(async()=>{WA.player.getPosition().then(o=>{if(n!=Math.round(o.x/32)||a!=Math.round(o.y/32)){for(let e=0;e<5;e++)for(let r=0;r<5;r++)WA.room.setTiles([{x:n-2+e,y:a-2+r,tile:7,layer:"darkness"}]);n=Math.round(o.x/32),a=Math.round(o.y/32);for(let e=0;e<5;e++)for(let r=0;r<5;r++)WA.room.setTiles([{x:n-2+e,y:a-2+r,tile:null,layer:"darkness"}])}})})})}).catch(t=>console.error(t))}).catch(c=>console.error(c));function u(){s!==void 0&&(s.close(),s=void 0)}
