import{b as W}from"./init.e2c43348.js";console.log("Script started successfully");let t;WA.onInit().then(async()=>{console.log("Scripting API ready"),console.log("Player tags: ",WA.player);function c(o,e=new Date){return e.setTime(e.getTime()+o*60*60*1e3),e}const b=c(1);let p=0,A=0;console.log(WA.player),console.log(WA.room+"test"),setInterval(function(){let o=new Date().getTime(),e=b.getTime()-o;p=Math.floor(e%(1e3*60*60)/(1e3*60)),A=Math.floor(e%(1e3*60)/1e3)}),WA.chat.onChatMessage(o=>{o=="N"&&WA.room.hideLayer("door_closed4")}),WA.chat.onChatMessage(o=>{o=="\u{1F921}"&&WA.room.hideLayer("door_closed5")}),WA.chat.onChatMessage(o=>{o=="clown"&&WA.chat.sendChatMessage("Tu connais les emojis ?","Maitre du jeu")}),WA.chat.onChatMessage(o=>{o=="q9y4"&&WA.chat.sendChatMessage("As-tu lu mon dernier message ?!","Maitre du jeu")}),WA.chat.onChatMessage(o=>{o=="17i25d"&&WA.room.hideLayer("finalDoor")}),WA.state.onVariableChange("pneu1").subscribe(o=>{let e=[];WA.state.saveVariable("pneu1",o);let i=WA.state.loadVariable("pneu1"),u=WA.state.loadVariable("pneu2"),l=WA.state.loadVariable("pneu3"),a=WA.state.loadVariable("pneu4");e.push(i,u,l,a);let r=e.filter(Boolean),n=e.length-r.length;i&&u&&l&&a?(WA.chat.sendChatMessage("Une porte vient de s'ouvrir ","Maitre du jeu"),WA.state.saveVariable("door_2",{default:!0}),WA.state.loadVariable("door_2")):WA.chat.sendChatMessage("Il reste "+n+"/"+e.length+" pneus \xE0 ramasser ","Maitre du jeu")}),WA.state.onVariableChange("pneu2").subscribe(o=>{let e=[];WA.state.saveVariable("pneu2",o);let i=WA.state.loadVariable("pneu1"),u=WA.state.loadVariable("pneu2"),l=WA.state.loadVariable("pneu3"),a=WA.state.loadVariable("pneu4");e.push(i,u,l,a);let r=e.filter(Boolean),n=e.length-r.length;i&&u&&l&&a?(WA.chat.sendChatMessage("Une porte vient de s'ouvrir ","Maitre du jeu"),WA.state.saveVariable("door_2",{default:!0}),WA.state.loadVariable("door_2")):WA.chat.sendChatMessage("Il reste "+n+"/"+e.length+" pneus \xE0 ramasser ","Maitre du jeu")}),WA.state.onVariableChange("pneu3").subscribe(o=>{let e=[];WA.state.saveVariable("pneu3",o);let i=WA.state.loadVariable("pneu1"),u=WA.state.loadVariable("pneu2"),l=WA.state.loadVariable("pneu3"),a=WA.state.loadVariable("pneu4");e.push(i,u,l,a);let r=e.filter(Boolean),n=e.length-r.length;i&&u&&l&&a?(WA.chat.sendChatMessage("Une porte vient de s'ouvrir ","Maitre du jeu"),WA.state.saveVariable("door_2",{default:!0}),WA.state.loadVariable("door_2")):WA.chat.sendChatMessage("Il reste "+n+"/"+e.length+" pneus \xE0 ramasser ","Maitre du jeu")}),WA.state.onVariableChange("pneu4").subscribe(o=>{let e=[];WA.state.saveVariable("pneu4",o);let i=WA.state.loadVariable("pneu1"),u=WA.state.loadVariable("pneu2"),l=WA.state.loadVariable("pneu3"),a=WA.state.loadVariable("pneu4");e.push(i,u,l,a);let r=e.filter(Boolean),n=e.length-r.length;i&&u&&l&&a?(WA.chat.sendChatMessage("Une porte vient de s'ouvrir ","Maitre du jeu"),WA.state.saveVariable("door_2",{default:!0}),WA.state.loadVariable("door_2")):WA.chat.sendChatMessage("Il reste "+n+"/"+e.length+" pneus \xE0 ramasser ","Maitre du jeu")}),WA.room.onEnterLayer("guess").subscribe(()=>{t=WA.ui.openPopup("guess1","L'oc\xE9an est sale, nettoyez-le.",[])}),WA.room.onEnterLayer("first").subscribe(()=>{t=WA.ui.openPopup("first","682 : Un des num\xE9ros est bien plac\xE9.",[])}),WA.room.onEnterLayer("second").subscribe(()=>{t=WA.ui.openPopup("second","614 : Un des num\xE9ros est correct mais mal plac\xE9.",[])}),WA.room.onEnterLayer("third").subscribe(()=>{t=WA.ui.openPopup("third","206 : Deux num\xE9ros sont corrects mais mal plac\xE9s.",[])}),WA.room.onEnterLayer("four").subscribe(()=>{t=WA.ui.openPopup("four","738 : Aucun des num\xE9ros n\u2019est correct.",[])}),WA.room.onEnterLayer("five").subscribe(()=>{t=WA.ui.openPopup("five","780 : Un des num\xE9ros est correct mais mal plac\xE9.",[])}),WA.room.onEnterLayer("six").subscribe(()=>{t=WA.ui.openPopup("six","402 : Deux chiffres sont corrects mais mal plac\xE9s.",[])}),WA.room.onEnterLayer("seven").subscribe(()=>{t=WA.ui.openPopup("seven","079 : Aucun chiffre correct.",[])}),WA.room.onEnterLayer("eight").subscribe(()=>{t=WA.ui.openPopup("eight","345 : Un seul chiffre correct et bien plac\xE9.",[])}),WA.room.onEnterLayer("nine").subscribe(()=>{t=WA.ui.openPopup("nine","870 : Un seul chiffre correct mais mal plac\xE9.",[])}),WA.room.onEnterLayer("ten").subscribe(()=>{t=WA.ui.openPopup("ten","293 : Un seul chiffre correct et bien plac\xE9.",[])}),WA.room.onEnterLayer("n1").subscribe(()=>{t=WA.ui.openPopup("n1","Elle est dans le mot tant et au fond du jardin.",[])}),WA.room.onEnterLayer("n2").subscribe(()=>{t=WA.ui.openPopup("n2","Elle commence la nuit et elle finit le matin.",[])}),WA.room.onEnterLayer("n3").subscribe(()=>{t=WA.ui.openPopup("n3","Elle appara\xEEt deux fois dans l\u2019ann\xE9e.",[])}),WA.room.onEnterLayer("a1").subscribe(()=>{t=WA.ui.openPopup("a1","Cette \xE9tape sera plus dur",[])}),WA.room.onEnterLayer("a2").subscribe(()=>{t=WA.ui.openPopup("a2","Et oui, Bon courage, \u{1F921}",[])}),WA.room.onEnterLayer("a3").subscribe(()=>{t=WA.ui.openPopup("a3","\u{1F921}",[])}),WA.room.onEnterLayer("lastOne").subscribe(()=>{t=WA.ui.openPopup("lastOne","L'alphabet et les chiffres sont invers\xE9",[])}),WA.room.onEnterLayer("firstMessage").subscribe(()=>{WA.chat.sendChatMessage("q","Maitre du jeu")}),WA.room.onEnterLayer("secondMessage").subscribe(()=>{WA.chat.sendChatMessage("9","Maitre du jeu")}),WA.room.onEnterLayer("thirdMessage").subscribe(()=>{WA.chat.sendChatMessage("y","Maitre du jeu")}),WA.room.onEnterLayer("fourthMessage").subscribe(()=>{WA.chat.sendChatMessage("4","Maitre du jeu")}),WA.room.onEnterLayer("openWallZone").subscribe(()=>{WA.room.hideLayer("openWall")}),WA.room.onEnterLayer("closeWallZone").subscribe(()=>{WA.room.showLayer("openWall")}),WA.room.onEnterLayer("clockZone").subscribe(()=>{t=WA.ui.openPopup("clockPopup","Time left: "+p+" "+A,[])}),WA.room.onEnterLayer("door_openZone4").subscribe(()=>{WA.room.showLayer("door_closed4")}),WA.room.onEnterLayer("door_openZone5").subscribe(()=>{WA.room.showLayer("door_closed5")}),WA.room.onLeaveLayer("guess").subscribe(s),WA.room.onLeaveLayer("first").subscribe(s),WA.room.onLeaveLayer("second").subscribe(s),WA.room.onLeaveLayer("third").subscribe(s),WA.room.onLeaveLayer("four").subscribe(s),WA.room.onLeaveLayer("five").subscribe(s),WA.room.onLeaveLayer("six").subscribe(s),WA.room.onLeaveLayer("seven").subscribe(s),WA.room.onLeaveLayer("eight").subscribe(s),WA.room.onLeaveLayer("nine").subscribe(s),WA.room.onLeaveLayer("ten").subscribe(s),WA.room.onLeaveLayer("n1").subscribe(s),WA.room.onLeaveLayer("n2").subscribe(s),WA.room.onLeaveLayer("n3").subscribe(s),WA.room.onLeaveLayer("a1").subscribe(s),WA.room.onLeaveLayer("a2").subscribe(s),WA.room.onLeaveLayer("a3").subscribe(s),WA.room.onLeaveLayer("lastOne").subscribe(s),WA.room.onLeaveLayer("start").subscribe(s),WA.room.onLeaveLayer("clockZone").subscribe(s),W().then(async()=>{console.log("Scripting API Extra ready"),WA.room.getTiledMap().then(async o=>{let e=o.width,i=o.height;for(let a=0;a<e;a++)for(let r=0;r<i;r++)WA.room.setTiles([{x:a,y:r,tile:"dark",layer:"darkness"}]);let u=0,l=0;WA.player.getPosition().then(a=>{u=Math.round(a.x/32),l=Math.round(a.y/32);for(let r=0;r<5;r++)for(let n=0;n<5;n++)WA.room.setTiles([{x:u-2+r,y:l-2+n,tile:null,layer:"darkness"}])}),WA.player.onPlayerMove(async()=>{WA.player.getPosition().then(a=>{if(u!=Math.round(a.x/32)||l!=Math.round(a.y/32)){for(let r=0;r<5;r++)for(let n=0;n<5;n++)WA.room.setTiles([{x:u-2+r,y:l-2+n,tile:"dark",layer:"darkness"}]);u=Math.round(a.x/32),l=Math.round(a.y/32);for(let r=0;r<5;r++)for(let n=0;n<5;n++)WA.room.setTiles([{x:u-2+r,y:l-2+n,tile:null,layer:"darkness"}])}})})})}).catch(o=>console.error(o))}).catch(c=>console.error(c));function s(){t!==void 0&&(t.close(),t=void 0)}
