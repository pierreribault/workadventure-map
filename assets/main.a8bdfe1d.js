import{b as g}from"./init.e2c43348.js";console.log("Script started successfully");let e;WA.onInit().then(async()=>{console.log("Scripting API ready"),console.log("Player tags: ",WA.player);function W(o,s=new Date){return s.setTime(s.getTime()+o*60*60*1e3),s}const L=W(1);let m=0,y=0,p=[],d=!1,h=!1;const f=await WA.ui.website.open({url:"https://e.ggtimer.com/1heures",position:{vertical:"top",horizontal:"middle"},size:{height:"100px",width:"600px"}});f.position.vertical="top",setInterval(function(){let o=new Date().getTime(),s=L.getTime()-o;m=Math.floor(s%(1e3*60*60)/(1e3*60)),y=Math.floor(s%(1e3*60)/1e3)}),WA.chat.onChatMessage(o=>{o=="N"&&WA.room.hideLayer("door_closed4")}),WA.chat.onChatMessage(o=>{o=="\u{1F921}"&&WA.room.hideLayer("door_closed5")}),WA.chat.onChatMessage(o=>{o=="clown"&&WA.chat.sendChatMessage("Tu connais les emojis ?","Maitre du jeu")}),WA.chat.onChatMessage(o=>{o=="q9y4"&&WA.chat.sendChatMessage("As-tu lu mon dernier message ?!","Maitre du jeu")}),WA.chat.onChatMessage(o=>{o=="17i25d"&&WA.room.hideLayer("finalDoor")});let A=function(o){let s=[];WA.state.saveVariable("pneu4",o);let b=WA.state.loadVariable("pneu1"),l=WA.state.loadVariable("pneu2"),c=WA.state.loadVariable("pneu3"),n=WA.state.loadVariable("pneu4");s.push(b,l,c,n);let a=s.filter(Boolean),i=s.length-a.length;if(b&&l&&c&&n){WA.chat.sendChatMessage("Une porte vient de s'ouvrir ","Maitre du jeu"),WA.state.saveVariable("door_2",{default:!0}),WA.state.loadVariable("door_2"),h==!1&&(WA.camera.set(39*32,36*32,void 0,void 0,!1,!0),h=!0);for(let t=0;t<40;t++)for(let u=0;u<30;u++)WA.room.setTiles([{x:t,y:u,tile:null,layer:"darkness"}]),p.push({x:t,y:u});for(let t=28;t<40;t++)for(let u=30;u<60;u++)WA.room.setTiles([{x:t,y:u,tile:null,layer:"darkness"}]),p.push({x:t,y:u});for(let t=0;t<40;t++)for(let u=54;u<60;u++)WA.room.setTiles([{x:t,y:u,tile:null,layer:"darkness"}]),p.push({x:t,y:u})}else WA.chat.sendChatMessage("Il reste "+i+"/"+s.length+" pneus \xE0 ramasser ","Maitre du jeu")};WA.state.onVariableChange("pneu1").subscribe(A),WA.state.onVariableChange("pneu2").subscribe(A),WA.state.onVariableChange("pneu3").subscribe(A),WA.state.onVariableChange("pneu4").subscribe(A),WA.room.onEnterLayer("trigger_timer_amphi").subscribe(()=>{e=WA.ui.openPopup("timer_amphi","Temps restant: "+m+" minutes "+y+" secondes",[]),console.log("test")}),WA.room.onEnterLayer("guess").subscribe(()=>{e=WA.ui.openPopup("guess1","L'oc\xE9an est sale, nettoyez-le.",[])}),WA.room.onEnterLayer("first").subscribe(()=>{e=WA.ui.openPopup("first","682 : Un des num\xE9ros est bien plac\xE9.",[])}),WA.room.onEnterLayer("second").subscribe(()=>{e=WA.ui.openPopup("second","614 : Un des num\xE9ros est correct mais mal plac\xE9.",[])}),WA.room.onEnterLayer("third").subscribe(()=>{e=WA.ui.openPopup("third","206 : Deux num\xE9ros sont corrects mais mal plac\xE9s.",[])}),WA.room.onEnterLayer("four").subscribe(()=>{e=WA.ui.openPopup("four","738 : Aucun des num\xE9ros n\u2019est correct.",[])}),WA.room.onEnterLayer("five").subscribe(()=>{e=WA.ui.openPopup("five","780 : Un des num\xE9ros est correct mais mal plac\xE9.",[])}),WA.room.onEnterLayer("six").subscribe(()=>{e=WA.ui.openPopup("six","402 : Deux chiffres sont corrects mais mal plac\xE9s.",[])}),WA.room.onEnterLayer("seven").subscribe(()=>{e=WA.ui.openPopup("seven","079 : Aucun chiffre correct.",[])}),WA.room.onEnterLayer("eight").subscribe(()=>{e=WA.ui.openPopup("eight","345 : Un seul chiffre correct et bien plac\xE9.",[])}),WA.room.onEnterLayer("nine").subscribe(()=>{e=WA.ui.openPopup("nine","870 : Un seul chiffre correct mais mal plac\xE9.",[])}),WA.room.onEnterLayer("ten").subscribe(()=>{e=WA.ui.openPopup("ten","293 : Un seul chiffre correct et bien plac\xE9.",[])}),WA.room.onEnterLayer("n1").subscribe(()=>{e=WA.ui.openPopup("n1","Elle est dans le mot tant et au fond du jardin.",[])}),WA.room.onEnterLayer("n2").subscribe(()=>{e=WA.ui.openPopup("n2","Elle commence la nuit et elle finit le matin.",[])}),WA.room.onEnterLayer("n3").subscribe(()=>{e=WA.ui.openPopup("n3","Elle appara\xEEt deux fois dans l\u2019ann\xE9e.",[])}),WA.room.onEnterLayer("a1").subscribe(()=>{e=WA.ui.openPopup("a1","Cette \xE9tape sera plus dur",[])}),WA.room.onEnterLayer("a2").subscribe(()=>{e=WA.ui.openPopup("a2","Et oui, Bon courage, \u{1F921}",[])}),WA.room.onEnterLayer("a3").subscribe(()=>{e=WA.ui.openPopup("a3","\u{1F921}",[])}),WA.room.onEnterLayer("lastOne").subscribe(()=>{e=WA.ui.openPopup("lastOne","L'alphabet et les chiffres sont invers\xE9",[])}),WA.room.onEnterLayer("secondMessage").subscribe(()=>{WA.chat.sendChatMessage("9","Maitre du jeu")}),WA.room.onEnterLayer("thirdMessage").subscribe(()=>{WA.chat.sendChatMessage("y","Maitre du jeu")}),WA.room.onEnterLayer("fourthMessage").subscribe(()=>{WA.chat.sendChatMessage("4","Maitre du jeu")}),WA.room.onEnterLayer("openWallZone").subscribe(()=>{WA.room.hideLayer("openWall")}),WA.room.onEnterLayer("closeWallZone").subscribe(()=>{WA.room.showLayer("openWall")}),WA.room.onEnterLayer("clockZone").subscribe(()=>{e=WA.ui.openPopup("clockPopup","Time left: "+m+" "+y,[])}),WA.room.onEnterLayer("door_openZone4").subscribe(()=>{WA.room.showLayer("door_closed4")}),WA.room.onEnterLayer("door_openZone5").subscribe(()=>{WA.room.showLayer("door_closed5")}),WA.room.onLeaveLayer("guess").subscribe(r),WA.room.onLeaveLayer("first").subscribe(r),WA.room.onLeaveLayer("second").subscribe(r),WA.room.onLeaveLayer("third").subscribe(r),WA.room.onLeaveLayer("four").subscribe(r),WA.room.onLeaveLayer("five").subscribe(r),WA.room.onLeaveLayer("six").subscribe(r),WA.room.onLeaveLayer("seven").subscribe(r),WA.room.onLeaveLayer("eight").subscribe(r),WA.room.onLeaveLayer("nine").subscribe(r),WA.room.onLeaveLayer("ten").subscribe(r),WA.room.onLeaveLayer("n1").subscribe(r),WA.room.onLeaveLayer("n2").subscribe(r),WA.room.onLeaveLayer("n3").subscribe(r),WA.room.onLeaveLayer("a1").subscribe(r),WA.room.onLeaveLayer("a2").subscribe(r),WA.room.onLeaveLayer("a3").subscribe(r),WA.room.onLeaveLayer("lastOne").subscribe(r),WA.room.onLeaveLayer("start").subscribe(r),WA.room.onLeaveLayer("clockZone").subscribe(r),WA.room.onLeaveLayer("trigger_timer_amphi").subscribe(r),WA.room.getTiledMap().then(async o=>{let s=o.width,b=o.height;for(let n=0;n<s;n++)for(let a=0;a<b;a++)WA.room.setTiles([{x:n,y:a,tile:6461,layer:"darkness"}]);let l=0,c=0;WA.player.getPosition().then(n=>{l=Math.round(n.x/32),c=Math.round(n.y/32);for(let a=0;a<5;a++)for(let i=0;i<5;i++)WA.room.setTiles([{x:l-2+a,y:c-2+i,tile:null,layer:"darkness"}])}),WA.player.onPlayerMove(async()=>{WA.player.getPosition().then(n=>{if(l!=Math.round(n.x/32)||c!=Math.round(n.y/32)){for(let a=0;a<5;a++)for(let i=0;i<5;i++)p.some(t=>t.x==l-2+a&&t.y==c-2+i)||WA.room.setTiles([{x:l-2+a,y:c-2+i,tile:6461,layer:"darkness"}]);l=Math.round(n.x/32),c=Math.round(n.y/32);for(let a=0;a<5;a++)for(let i=0;i<5;i++)WA.room.setTiles([{x:l-2+a,y:c-2+i,tile:null,layer:"darkness"}])}})})}),WA.state.onVariableChange("door_amphi").subscribe(o=>{if(o==!0){d==!1&&(WA.camera.set(13*32,30*32,void 0,void 0,!1,!0),d=!0);for(let s=0;s<28;s++)for(let b=30;b<53;b++)WA.room.setTiles([{x:s,y:b,tile:null,layer:"darkness"}]),p.push({x:s,y:b})}}),g().then(async()=>{console.log("Scripting API Extra ready")}).catch(o=>console.error(o))}).catch(W=>console.error(W));function r(){e!==void 0&&(e.close(),e=void 0)}
